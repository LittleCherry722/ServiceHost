<div class="header">
	<div style="float:left; padding-top:10px;">Process started at: <span data-bind="text: processStarted.date"></span></div>
	<div style="float:right; padding-top:10px;">Process ended at: <span data-bind="text: processEnded.date"></span></div>
    <div style="clear:both;"></div>
</div>

<div id="processHistory">
  <div class="flexbox" id="clickablelist" style="height: 100%;">
      <div class="fluid" style="height: 100%;">
        
        <table class="table result">
          <thead>
            <th>Time</th>
            <th>Subject</th>
            <th>From</th>
            <th>@State</th>
            <th>To</th>
            <th>@State</th>
            <th></th>
          </thead>
          <tbody data-bind="foreach: historicEntries">
            <tr class="state" data-bind="click:  function() { if(transitionEvent() && $data.transitionEvent().hasOwnProperty('message')) $('.message'+$index()).toggle(); }, style: { cursor: transitionEvent() && $data.transitionEvent().hasOwnProperty('message') ? 'pointer' : '' }">
              <td data-bind="text: ts"></td>
              <td data-bind="text: ''"></td>
              <td data-bind="text: transitionEvent() ? transitionEvent().fromState.text:''"></td>
              <td data-bind="text: transitionEvent() ? transitionEvent().fromState.stateType:''"></td>
              <td data-bind="text: transitionEvent() ? transitionEvent().toState.text:''"></td>
              <td data-bind="text: transitionEvent() ? transitionEvent().toState.stateType:''"></td>
              <td><!-- ko if: transitionEvent() && $data.transitionEvent().hasOwnProperty("message") --><img src="images/icons/e-mail.png" alt="Messages" /><!-- /ko -->  </td>
            </tr>
              <!-- Line below will be recognized by ko parser-->
              <!-- ko if: transitionEvent() && $data.transitionEvent().hasOwnProperty("message") -->
              <tr class="true" style="display: none;" data-bind="attr: { 'class': 'messages message' +$index() }">
 				<td colspan="7" style="padding:0;">
                	<div style="padding:8px; border-bottom:1px solid #7D7D7D; border-right: 1px solid #7D7D7D;border-left: 1px solid #7D7D7D;">
                        <div style="float:left; width:282px;">
                        	<div style="float:left;width:90px;padding:5px;font-weight:bold;">ID:</div><div style="float:left;padding:5px;" data-bind="text: transitionEvent().message.messageId"></div><div style="clear:both;"></div>
                        	<div style="float:left;width:90px;padding:5px;font-weight:bold;">Type:</div><div style="float:left;padding:5px;" data-bind="text: transitionEvent().message.messageType">></div><div style="clear:both;"></div>
                        </div>
                        <div style="float:left;">
                        	<div style="float:left;width:90px;padding:5px;font-weight:bold;">From:</div><div style="float:left;padding:5px;" data-bind="text: transitionEvent().message.fromSubject">></div><div style="clear:both;"></div>
                        	<div style="float:left;width:90px;padding:5px;font-weight:bold;">To:</div><div style="float:left;padding:5px;" data-bind="text: transitionEvent().message.toSubject">></div><div style="clear:both;"></div>
                        </div>
                        <div style="clear:both"></div>
                        <div style="float:left; width:90px;padding:5px;font-weight:bold;">Message:</div><div style="float:left;padding:5px;" data-bind="text: transitionEvent().message.text">></div><div style="clear:both;"></div>
                	</div>
                </td>
              </tr>
              <!-- /ko -->    
          </tbody>
        </table>
      </div>
    </div>
  </div>
</div>

